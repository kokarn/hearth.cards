<!-- Included from ng-include. This creates a child scope --!>
<div class="row" id="search">
  <div class="col-lg-offset-3 col-lg-6 col-md-offset-2 col-md-8 col-sm-offset-1
    col-sm-10 col-xs-offset-1 col-xs-10" >
    <div id="custom-search-input" class="input-group input-group-lg">
      <input ng-model="$parent.query" ng-change="search(query)"
      ng-model-options="{debounce:200}" type="search" class="search-query
      form-control" placeholder="try 'legendary mech', '2 mana mage spell', or '2/3 gvg minion with freeze'" autofocus>
      <span class="input-group-btn">
        <button class="btn search-btn" type="button">
          <span class="glyphicon glyphicon-search"></span>
        </button>
      </span>
      <span class="input-group-btn">
        <a tabindex="0" class="btn help-btn" role="button" data-toggle="popover"
        title="Help" data-container="body" data-trigger="click">
          <span class="glyphicon glyphicon-question-sign"></span>
        </a>
      </span>
    </div>
  </div>
</div>

<div id="help-popover-content" class="hidden">
  <div>
  <h4>Examples:</h4>
  <ul>
    <li><a href="#collectible murlocs">collectible murlocs</li>
    <li><a href="#collectible legendary mech">collectible legendary mech</a></li>
    <li><a href="#2 mana mage spell">2 mana mage spell</a></li>
    <li><a href="#2/3 gvg minion with freeze">2/3 gvg minion with freeze</a></li>
    <li><a href="#loe collectible spells">loe collectible spells</a></li>
  </ul>
  </div>

  <div>
  <h4>Filter by class:</h4>
  <a href="#druid">druid</a>
  <a href="#hunter">hunter</a>
  <a href="#mage">mage</a>
  <a href="#paladin">paladin</a>
  <a href="#priest">priest</a>
  <a href="#rogue">rogue</a>
  <a href="#shaman">shaman</a>
  <a href="#warlock">warlock</a>
  <a href="#warrior">warrior</a>
  <a href="#neutral">neutral</a>
  </div>

  <div>
  <h4>Show only collectible cards:</h4>
  <a href="#collectible">collectible</a>/<a href="#collectable">collectable</a>/<a href="#draftable">draftable</a>
  </div>

  <div>
  <h4>Filter by type:</h4>
  <a href="#minion">minion</a>
  <a href="#weapon">weapon</a>
  <a href="#spell">spell</a>
  </div>

  <div>
  <h4>Filter by mana/attack/health:</h4>
  <a href="#1 mana">1 mana</a>
  <a href="#2 attack">2 attack</a>
  <a href="#3 health">3 health</a>
  <a href="#7/7 minion">7/7 minion</a>
  </div>

  <div>
  <h4>Filter by rarity:</h4>
  <a href="#legendary">legendary</a>
  <a href="#epic">epic</a>
  <a href="#rare">rare</a>
  <a href="#common">common</a>
  <a href="#free">free</a>
  </div>

  <div>
  <h4>Filter by race:</h4>
  <a href="#beast">beast</a>
  <a href="#demon">demon</a>
  <a href="#dragon">dragon</a>
  <a href="#mech">mech</a>
  <a href="#murloc">murloc</a>
  <a href="#pirate">pirate</a>
  <a href="#totem">totem</a>
  </div>
  
  <div>
  <h4>Filter by set:</h4>
  <ul>
  <li><a href="#basic">basic</a></li>
  <li><a href="#classic">classic</a></li>
  <li><a href="#reward">reward</a></li>
  <li><a href="#promo">promo</a></li>
  <li><a href="#gvg">gvg (Goblin vs. Gnomes)</a></li>
  <li><a href="#naxx">naxx (Curse of Naxxramas)</a></li>
  <li><a href="#brm">brm (Blackrock Mountain)</a></li>
  <li><a href="#tgt">tgt (The Grand Tournament)</a></li>
  <li><a href="#loe">loe (League of Explorers)</a></li>
  <li><a href="#wog">wog (Whisper of the Old Gods)</a></li>
  <li><a href="#kara">kara (One Night in Karazhan)</a></li>
  <li><a href="#msg">msg (Mean Streets of Gadgetzan)</a></li>
  </ul>
  </div>
  
</div>

<div class="row text-center" ng-cloak>
  <div class="col-lg-12">
    <div ng-class="percentCircleCssClass()">
      <span>{{filtered.length}}</span>
      <div class="slice">
        <div class="bar"></div>
        <div class="fill"></div>
      </div>
    </div>
  </div>
</div>

<div ng-switch="filtered.length" ng-cloak>
  <div ng-switch-when="0" class="notfound text-center">
    <h1>try another search</h1>
    <img src="images/error-bg.png" class="img-responsive center-block">
  </div>

  <div ng-switch-when="1" class="row" id="cards">
    <!-- <div class="col-lg-4 col-md-3 col-sm-4 col-xs-6"> --><!-- <dl class="dl-horizontal"> --><!-- <dt>Class</dt> --><!-- <dd>{{card.class == nil ? "Neutral" : card.class}}</dd> --><!-- <dt>Mana</dt> --><!-- <dd>{{card.mana}}</dd> --><!-- <dt>Attack</dt> --><!-- <dd>{{card.attack}}</dd> --><!-- <dt>Health</dt> --><!-- <dd>{{card.health}}</dd> --><!-- <dt>Type</dt> --><!-- <dd>{{card.type}}</dd> --><!-- <dt>Race</dt> --><!-- <dd>{{card.race}}</dd> --><!-- <dt>Set</dt> --><!-- <dd>{{card.set}}</dd> --><!-- <dt>Rarity</dt> --><!-- <dd>{{card.rarity}}</dd> --><!-- <dt>Text</dt> --><!-- <dd>{{card.text}}</dd> --><!-- </dl> --><!-- </div> --> <card card="filtered[0]" ng-click="show(filtered[0])"></card> <div class="col-lg-2 col-md-3 col-sm-4 col-xs-6" ng-if="relatedCards.length > 0"> <img ng-src="images/arrow-blue.png" class="img-responsive center-block"> </div> <div ng-if="relatedCards.length > 0"> <card card="related" ng-click="show(related)" ng-repeat="related in relatedCards track by related.id"></card> </div>  <div ng-switch-default class="row" id="cards" infinite-scroll="load()" infinite-scroll-distance="2"> <card card="card" ng-click="show(card)" ng-repeat="card in shown track by card.id"></card> </div>